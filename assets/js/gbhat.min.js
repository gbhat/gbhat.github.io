!function(e,t){function n(){var t=new XMLHttpRequest;t.open("GET","/assets/js/search-data.json",!0),t.onload=function(){if(t.status>=200&&t.status<400){var n=JSON.parse(t.responseText);lunr.tokenizer.separator=/[\s/]+/,function(t,n){t=t,n=n;var r,i=document.getElementById("search-input"),s=document.getElementById("search-results"),a=(document.getElementById("main-header"),0);function c(){document.documentElement.classList.add("search-active")}function l(){document.documentElement.classList.remove("search-active")}function o(){a++;var e=i.value;if(""===e?l():(c(),window.scroll(0,-1),setTimeout((function(){window.scroll(0,0)}),0)),e!==r&&(r=e,s.innerHTML="",""!==e)){var o=t.query((function(t){var n=lunr.tokenizer(e);t.term(n,{boost:10}),t.term(n,{wildcard:lunr.Query.wildcard.TRAILING})}));if(console.log(o),0==o.length&&e.length>2){var d=lunr.tokenizer(e).filter((function(e,t){return e.str.length<20}));d.length>0&&(o=t.query((function(t){t.term(d,{editDistance:Math.round(Math.sqrt(e.length/2-1))})})))}if(0==o.length){var u=document.createElement("div");u.classList.add("search-no-result"),u.innerText="No results found",s.appendChild(u)}else{var h=document.createElement("ul");h.classList.add("search-results-list"),s.appendChild(h),v(h,o,0,10,100,a)}}function v(e,t,n,r,i,s){if(s==a){for(var c=n;c<n+r;c++){if(c==t.length)return;p(e,t[c])}setTimeout((function(){v(e,t,n+r,r,i,s)}),i)}}function p(e,t){var r=n[t.ref],i=document.createElement("li");i.classList.add("search-results-list-item"),e.appendChild(i);var s=document.createElement("a");s.classList.add("search-result"),s.setAttribute("href",r.url),i.appendChild(s);var a=document.createElement("div");a.classList.add("search-result-title"),s.appendChild(a);var c=document.createElement("div");c.classList.add("search-result-doc"),c.innerHTML='<svg viewBox="0 0 24 24" class="search-result-icon"><use xlink:href="#svg-doc"></use></svg>',a.appendChild(c);var l=document.createElement("div");l.classList.add("search-result-doc-title"),l.innerHTML=r.doc,c.appendChild(l);var o=l;if(r.doc!=r.title){c.classList.add("search-result-doc-parent");var d=document.createElement("div");d.classList.add("search-result-section"),d.innerHTML=r.title,a.appendChild(d),o=d}var u=t.matchData.metadata,h=[],v=[];for(var p in u){var m=u[p];if(m.title){var g=m.title.position;for(var E in g)h.push(g[E])}if(m.content){g=m.content.position;for(var E in g){var L=(_=g[E])[0],w=_[0]+_[1],y=!0,b=!0;for(E=0;E<3;E++){var C=r.content.lastIndexOf(" ",L-2);if((S=r.content.lastIndexOf(". ",L-2))>=0&&S>C){L=S+1,y=!1;break}if(C<0){L=0,y=!1;break}L=C+1}for(E=0;E<3;E++){var S;C=r.content.indexOf(" ",w+1);if((S=r.content.indexOf(". ",w+1))>=0&&S<C){w=S,b=!1;break}if(C<0){w=r.content.length,b=!1;break}w=C}v.push({highlight:_,previewStart:L,previewEnd:w,ellipsesBefore:y,ellipsesAfter:b})}}}if(h.length>0&&(h.sort((function(e,t){return e[0]-t[0]})),o.innerHTML="",f(o,r.title,0,r.title.length,h)),v.length>0){v.sort((function(e,t){return e.highlight[0]-t.highlight[0]}));var $=v[0],x={highlight:[$.highlight],previewStart:$.previewStart,previewEnd:$.previewEnd,ellipsesBefore:$.ellipsesBefore,ellipsesAfter:$.ellipsesAfter},T=[x];for(p=1;p<v.length;p++)$=v[p],x.previewEnd<$.previewStart?(x={highlight:[$.highlight],previewStart:$.previewStart,previewEnd:$.previewEnd,ellipsesBefore:$.ellipsesBefore,ellipsesAfter:$.ellipsesAfter},T.push(x)):(x.highlight.push($.highlight),x.previewEnd=$.previewEnd,x.ellipsesAfter=$.ellipsesAfter);var k=document.createElement("div");k.classList.add("search-result-previews"),s.appendChild(k);var q=r.content;for(p=0;p<Math.min(T.length,1);p++){var _=T[p],A=document.createElement("div");A.classList.add("search-result-preview"),k.appendChild(A),_.ellipsesBefore&&A.appendChild(document.createTextNode("... ")),f(A,q,_.previewStart,_.previewEnd,_.highlight),_.ellipsesAfter&&A.appendChild(document.createTextNode(" ..."))}}var B=document.createElement("span");B.classList.add("search-result-rel-url"),B.innerText=r.relUrl,a.appendChild(B)}function f(e,t,n,r,i){var s=n;for(var a in i){var c,l=i[a];(c=document.createElement("span")).innerHTML=t.substring(s,l[0]),e.appendChild(c),s=l[0]+l[1];var o=document.createElement("span");o.classList.add("search-result-highlight"),o.innerHTML=t.substring(l[0],s),e.appendChild(o)}(c=document.createElement("span")).innerHTML=t.substring(s,r),e.appendChild(c)}}$(".search-close").click((function(){l(),$("#search-input").val("")})),e.addEvent(i,"focus",(function(){setTimeout(o,0)})),e.addEvent(i,"keyup",(function(e){switch(e.keyCode){case 27:i.value="";break;case 38:case 40:case 13:return void e.preventDefault()}o()})),e.addEvent(i,"keydown",(function(e){switch(e.keyCode){case 38:if(e.preventDefault(),n=document.querySelector(".search-result.active"))if(n.classList.remove("active"),n.parentElement.previousSibling)n.parentElement.previousSibling.querySelector(".search-result").classList.add("active");return;case 40:if(e.preventDefault(),n=document.querySelector(".search-result.active")){if(n.parentElement.nextSibling){var t=n.parentElement.nextSibling.querySelector(".search-result");n.classList.remove("active"),t.classList.add("active")}}else(t=document.querySelector(".search-result"))&&t.classList.add("active");return;case 13:var n;if(e.preventDefault(),n=document.querySelector(".search-result.active"))n.click();else{var r=document.querySelector(".search-result");r&&r.click()}return}})),e.addEvent(document,"click",(function(e){e.target!=i&&l()}))}(lunr((function(){for(var e in this.ref("id"),this.field("title_first_word",{boost:1e3}),this.field("title",{boost:200}),this.field("description",{boost:20}),this.field("content",{boost:2}),this.field("relUrl"),this.metadataWhitelist=["position"],n)this.add({id:e,title_first_word:n[e].title.split(" ")[0],title:n[e].title,description:n[e].description,content:n[e].content,relUrl:n[e].relUrl},{boost:100*n[e].weight})})),n)}else console.log("Error loading ajax request. Request status:"+t.status)},t.onerror=function(){console.log("There was a connection error")},t.send()}function r(e){const t=e.target,n=e.target.querySelector(".copy_confirm_text"),r=document.createElement("textarea");r.textContent=t.getAttribute("code-data"),document.body.appendChild(r);const i=document.getSelection();i.removeAllRanges(),r.select(),document.execCommand("copy"),i.removeAllRanges(),document.body.removeChild(r),t.classList.add("copied"),n.classList.add("copied"),setTimeout((()=>{t.classList.remove("copied"),n.classList.remove("copied")}),1e3)}function i(){$(".anim_img").each((function(e,t){url=$(t).attr("alt-src"),function(e){return new Promise(((t,n)=>{let r=new Image;r.addEventListener("load",(e=>t(r))),r.addEventListener("error",(()=>{n(new Error(`Failed to load image's URL: ${e}`))})),r.src=e}))}(url).then((e=>{$(e).addClass("anim_img"),$(this).parent().prepend(e),$(this).remove()})).catch((e=>console.error(e)))}))}e.addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)},e.removeEvent=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)},e.onReady=function(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"complete"==document.readyState&&e()}))},e.getTheme=function(){var e=document.querySelector('[rel="stylesheet"]').getAttribute("href");return e.substring(e.lastIndexOf("-")+1,e.length-4)},e.setTheme=function(e){document.querySelector('[rel="stylesheet"]').setAttribute("href","https://gbhat.com/assets/css/gbhat-"+e+".css")},e.onReady((function(){!function(){e.addEvent(document,"click",(function(e){for(var t=e.target;t&&(!t.classList||!t.classList.contains("nav-list-expander"));)t=t.parentNode;t&&(e.preventDefault(),t.parentNode.classList.toggle("active"))}));const t=document.getElementById("site-nav"),n=document.getElementById("main-header"),r=document.getElementById("menu-button");e.addEvent(r,"click",(function(e){e.preventDefault(),r.classList.toggle("nav-open")?(t.classList.add("nav-open"),n.classList.add("nav-open")):(t.classList.remove("nav-open"),n.classList.remove("nav-open"))}))}(),i(),count=$(".code_container").length,$(".code_container").each((function(e,t){url=$(t).attr("src"),filename=url.split("/").pop();var n=$(t).find(".prettyprint"),r=$(t).find(".copy_code_btn"),i=$(t).find(".code_filename");$(n).html("Loading..."),$(i).html(filename),$.get(url,(function(e,t){"success"===t?($(n).text(e),$(r).attr("code-data",e),$(r).addClass("code_visible")):$(n).text("Load failed!!!"),count--,0===count&&PR.prettyPrint()}))})),$(".copy_code_btn").each((function(e,t){$(t).click(r)})),n()}))}(window.jtd=window.jtd||{});
